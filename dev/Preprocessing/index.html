<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Preprocessing ¬∑ Eegle</title><meta name="title" content="Preprocessing ¬∑ Eegle"/><meta property="og:title" content="Preprocessing ¬∑ Eegle"/><meta property="twitter:title" content="Preprocessing ¬∑ Eegle"/><meta name="description" content="Documentation for Eegle."/><meta property="og:description" content="Documentation for Eegle."/><meta property="twitter:description" content="Documentation for Eegle."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Eegle logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Eegle</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Eegle Documentation</a></li><li><a class="tocitem" href="../Eegle/">Eegle Package</a></li><li><span class="tocitem">Eegle Modules</span><ul><li class="is-active"><a class="tocitem" href>Preprocessing</a><ul class="internal"><li><a class="tocitem" href="#Methods"><span>Methods</span></a></li></ul></li><li><a class="tocitem" href="../Processing/">Processing</a></li><li><a class="tocitem" href="../ERPs/">Event-Related Potentials</a></li><li><a class="tocitem" href="../CovarianceMatrix/">Covariance Matrices</a></li></ul></li><li><span class="tocitem">Utilities</span><ul><li><a class="tocitem" href="../InOut/">Input/Output</a></li><li><a class="tocitem" href="../FileSystem/">File System</a></li><li><a class="tocitem" href="../Miscellaneous/">Miscellaneous</a></li></ul></li><li><span class="tocitem">BCI DBs Documentation</span><ul><li><a class="tocitem" href="../documents/BCI Databases Overview/">BCI DBs Overview</a></li><li><a class="tocitem" href="../documents/Databases Summary MI/">databases Summary MI</a></li><li><a class="tocitem" href="../documents/TreatmentMI/">TreatmentMI</a></li><li><a class="tocitem" href="../documents/Databases Summary P300/">databases Summary P300</a></li><li><a class="tocitem" href="../documents/TreatmentP300/">TreatmentP300</a></li><li><a class="tocitem" href="../documents/yamlstruct/">NY metadata (YAML)</a></li></ul></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Eegle Modules</a></li><li class="is-active"><a href>Preprocessing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Preprocessing</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Marco-Congedo/Eegle.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Marco-Congedo/Eegle.jl/blob/master/docs/src/Preprocessing.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Preprocessing.jl"><a class="docs-heading-anchor" href="#Preprocessing.jl">Preprocessing.jl</a><a id="Preprocessing.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Preprocessing.jl" title="Permalink"></a></h1><p>This module implements <strong>preprocessing</strong> for EEG data.</p><p><strong>See also</strong> <a href="../Processing/#Processing.jl">Processing.jl</a></p><h2 id="Methods"><a class="docs-heading-anchor" href="#Methods">Methods</a><a id="Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Methods" title="Permalink"></a></h2><table><tr><th style="text-align: left">Function</th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left"><a href="#DSP.Filters.resample"><code>Eegle.Preprocessing.resample</code></a></td><td style="text-align: left">resample EEG data</td></tr><tr><td style="text-align: left"><a href="#StatsBase.standardize"><code>Eegle.Preprocessing.standardize</code></a></td><td style="text-align: left">standardize EEG data</td></tr><tr><td style="text-align: left"><a href="#Eegle.Preprocessing.removeChannels"><code>Eegle.Preprocessing.removeChannels</code></a></td><td style="text-align: left">remove channels from EEG data</td></tr><tr><td style="text-align: left"><a href="#Eegle.Preprocessing.removeSamples"><code>Eegle.Preprocessing.removeSamples</code></a></td><td style="text-align: left">remove samples from EEG data</td></tr><tr><td style="text-align: left"><a href="#Eegle.Preprocessing.embedLags"><code>Eegle.Preprocessing.embedLags</code></a></td><td style="text-align: left">lag-embedding of EEG data</td></tr></table><p>üìñ</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StatsBase.standardize" href="#StatsBase.standardize"><code>StatsBase.standardize</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    function standardize(X::AbstractArray{T}; 
        robust = false,
        prop::Real = 0.2) 
    where T&lt;:Real</code></pre><p>Standardize the whole <span>$T√óN$</span> EEG recording <code>X</code>, where <span>$T$</span> and <span>$N$</span> denotes the number of samples and channels (sensors), respectively, using: </p><ul><li>the arithmetic mean and standard deviation if <code>robust</code> is false (default)</li><li>the Winsorized (trimmed) mean and standard deviation if <code>robust</code> is true.</li></ul><p>The trimmed statistics are computed excluding the <code>prop</code> proportion of data at both sides (default=0.2), thus, <code>prop</code> is used only if <code>robust</code> is true.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using Eegle # or using Eegle.Preprocessing

X=randn(1024, 19)

stX=standardize(X)

stX=standardize(X; robust=true, prop=0.1)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Marco-Congedo/Eegle.jl/blob/8425ce6e930bd90d5e2c5f14f38328cda1a541ba/src/Preprocessing.jl#L21-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DSP.Filters.resample" href="#DSP.Filters.resample"><code>DSP.Filters.resample</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    function resample(  X::AbstractMatrix{T},
                        sr::S,
                        rate::Union{T, S, Rational};
        rel_bw::Float64 = 1.0,
        attenuation::Int = 60,
        stim::Union{Vector{S}, Nothing} = nothing) 
    where {T&lt;:Real, S&lt;:Int}</code></pre><p>Resampling of the <span>$T√óN$</span> EEG recording <code>X</code>, where <span>$T$</span> and <span>$N$</span> denotes the number of samples and channels (sensors), respectively, using the polyphase FIR filter with Kaiser window filter taps,   as per the <a href="https://docs.juliadsp.org/stable/filters/#DSP.Filters.resample">resample</a> method in DSP.jl.</p><p>For <a href="#Acronyms">kwarg</a> <code>rel_bw</code> and <code>attenuation</code> ‚Äî see <a href="https://docs.juliadsp.org/stable/filters/#DSP.Filters.resample">resample</a>.</p><p>If a <a href="../ERPs/#stimulation-vector">stimulation vector</a> <code>stim</code> is passed as kwarg, It will be resampled so as to match the resampling of <code>X</code> as precisely as possible. <code>stim</code> must be a vector of <span>$T$</span> integers.</p><div class="admonition is-success" id="Resampling-e70629b0ebe2f9b7"><header class="admonition-header">Resampling<a class="admonition-anchor" href="#Resampling-e70629b0ebe2f9b7" title="Permalink"></a></header><div class="admonition-body"><p>If you need to work with individual trials, do not resample trials individually; rather, resample the whole EEG recording and then extract the trials. Function <a href="../InOut/#Eegle.InOut.readNY"><code>Eegle.InOut.readNY</code></a> allows you to do resampling and extract trials this way.</p></div></div><div class="admonition is-warning" id="Real-resampling-rate-4989782ee94063af"><header class="admonition-header">Real resampling rate<a class="admonition-anchor" href="#Real-resampling-rate-4989782ee94063af" title="Permalink"></a></header><div class="admonition-body"><p>The use of real resampling rates need to be tested</p></div></div><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using Eegle # or using Eegle.Preprocessing

sr = 128
X = randn(sr*10, 19)

Y=resample(X, sr, 1//4) # downsample by a factor 4

Y=resample(X, sr, 2) # upsample by a factor 2, i.e., double the sampling rate</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Marco-Congedo/Eegle.jl/blob/8425ce6e930bd90d5e2c5f14f38328cda1a541ba/src/Preprocessing.jl#L59-L96">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Eegle.Preprocessing.removeChannels" href="#Eegle.Preprocessing.removeChannels"><code>Eegle.Preprocessing.removeChannels</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    function removeChannels(X::AbstractMatrix{T}, 
                            what::Union{Int, Vector{S}},
                            sensors::Vector{String}) 
    where {T&lt;:Real, S&lt;:Int}
</code></pre><p>Remove one or more channels, i.e., columns, from the <span>$T√óN$</span> EEG recording <code>X</code>,  where <span>$T$</span> and <span>$N$</span> denotes the number of samples and channels (sensors), respectively, and remove the corresponding elements from <code>sensors</code>, the provided associated vector of <span>$N$</span> sensor labels.</p><p>For the use of <a href="#Acronyms">kwarg</a> <code>what</code> ‚Äî see method <a href="../Miscellaneous/#Eegle.Miscellaneous.remove"><code>Eegle.Miscellaneous.remove</code></a>, which can be used if all you need is to remove channels from <code>X</code>.</p><p>Return the 3-tuple (<code>newX</code>, <code>s</code>, <code>ne</code>), where <code>newX</code> is the new EEG recording, <code>s</code> is the new sensor labels vector and <code>ne</code> is the new number of channels (sensors) in <code>newX</code>.</p><p><strong>See Also</strong> <a href="../InOut/#Eegle.InOut.readSensors"><code>Eegle.InOut.readSensors</code></a></p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using Eegle # or using Eegle.Preprocessing

# xxx load data

# remove second channel
X, sensors, ne = removeChannels(X, 2, sensors)

# remove the first five channels
X, sensors, ne = removeChannels(X, collect(1:5), sensors)

# remove the channel labeled as &#39;Cz&#39; in `sensors`
X, sensors, ne = removeChannels(X, findfirst(x-&gt;x==&quot;Cz&quot;, sensors), sensors)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Marco-Congedo/Eegle.jl/blob/8425ce6e930bd90d5e2c5f14f38328cda1a541ba/src/Preprocessing.jl#L139-L173">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Eegle.Preprocessing.removeSamples" href="#Eegle.Preprocessing.removeSamples"><code>Eegle.Preprocessing.removeSamples</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    function removeSamples( X::AbstractMatrix{T}, 
                            what::Union{Int, Vector{S}},
                            stim::Vector{String}) 
    where {T&lt;:Real, S&lt;:Int}
</code></pre><p>Remove one or more samples, i.e., rows, from the <span>$T√óN$</span> EEG recording <code>X</code>,  where <span>$T$</span> and <span>$N$</span> denotes the number of samples and channels (sensors), respectively, and remove the corresponding elements from <code>stim</code>, the associated <a href="../ERPs/#stimulation-vector">stimulation vector</a>.</p><p>For the use of kwarg <code>what</code> ‚Äî see method <a href="../Miscellaneous/#Eegle.Miscellaneous.remove"><code>Eegle.Miscellaneous.remove</code></a>, which can be used instead if all you need is to remove samples from <code>X</code>.</p><p>Print a warning if elements in <code>what</code> correspond to non-zero tags in <code>stim</code>.</p><p>Return the 3-tuple (<code>newX</code>, <code>s</code>, <code>ne</code>), where <code>newX</code> is the new data, <code>s</code> is the new stimulation vector and <code>ns</code> is the new number of samples in <code>newX</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using Eegle

# load data xxx

# remove second sample
X, stim, ne = removeSamples(X, 2, stim)

# remove the first 128 samples
X, stim, ne = removeSamples(X, collect(1:128), stim)

# remove every other sample
X, stim, ne = removeSamples(X, collect(1:2:length(stim)), stim)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Marco-Congedo/Eegle.jl/blob/8425ce6e930bd90d5e2c5f14f38328cda1a541ba/src/Preprocessing.jl#L182-L216">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Eegle.Preprocessing.embedLags" href="#Eegle.Preprocessing.embedLags"><code>Eegle.Preprocessing.embedLags</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    function embedLags( X::AbstractMatrix{T}, 
                        lags = 0) 
    where T&lt;:Real </code></pre><p>Lag-embedding is a technique to augment the data. Second-order statistics of the augmented data, that is, covariance or cross-spectral matrices, hold information not only of volume condution and instantaneous connectivity, but also of lagged connectivity. These matrices can be used, for example, in blind source separation and Riemannian classification.</p><p>Given the <span>$T√óN$</span> EEG recording <code>X</code>, where <span>$T$</span> and <span>$N$</span> denotes the number of samples and channels (sensors), respectively,  and <span>$L&gt;0$</span> <code>lags</code>, return the <span>$T√óN(L+1)$</span> lag-embedded data matrix </p><p class="math-container">\[X_{\text{lags}} = \left[ 
X^{(0)} \;\; X^{(1)} \;\; \cdots \;\; X^{(L)}
\right]\]</p><p>where, letting <span>$\mathbf{0}_{A \times B}$</span> the <span>$A \times B$</span> matrix of zeros, for each <span>$l = 0, \ldots, L$</span>, the <span>$T√óN$</span> lagged partition <span>$X^{(l)}$</span> is defined as</p><p class="math-container">\[X^{(l)} = \left[
\begin{matrix}
\mathbf{0}_{(L - l) \times N} \\
X[1:(T - L), \: :] \\
\mathbf{0}_{l \times N}
\end{matrix}
\right].\]</p><p>Notice that the are no zeros appended to the first partition and no zeros prepended to the last partition. Notice also that the lag-embedded data has the same size of the input, however the last <span>$L$</span> samples are lost.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using Eegle # or using Eegle.Preprocessing

X=randn(1024, 19)

elX=emdedLags(X, 4)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Marco-Congedo/Eegle.jl/blob/8425ce6e930bd90d5e2c5f14f38328cda1a541ba/src/Preprocessing.jl#L232-L276">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Eegle/">¬´ Eegle Package</a><a class="docs-footer-nextpage" href="../Processing/">Processing ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Wednesday 2 July 2025 05:40">Wednesday 2 July 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
