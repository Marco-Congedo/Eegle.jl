<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Database ¬∑ Eegle</title><meta name="title" content="Database ¬∑ Eegle"/><meta property="og:title" content="Database ¬∑ Eegle"/><meta property="twitter:title" content="Database ¬∑ Eegle"/><meta name="description" content="Documentation for Eegle."/><meta property="og:description" content="Documentation for Eegle."/><meta property="twitter:description" content="Documentation for Eegle."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Eegle logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Eegle</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Eegle Documentation</a></li><li><a class="tocitem" href="../Eegle/">Eegle Package</a></li><li><a class="tocitem" href="../Tutorials/">Tutorials</a></li><li><span class="tocitem">Eegle Modules</span><ul><li><a class="tocitem" href="../Preprocessing/">Preprocessing</a></li><li><a class="tocitem" href="../Processing/">Processing</a></li><li><a class="tocitem" href="../ERPs/">Event-Related Potentials</a></li><li><a class="tocitem" href="../BCI/">Brain-Computer Interface</a></li><li class="is-active"><a class="tocitem" href>Database</a><ul class="internal"><li><a class="tocitem" href="#Database.jl"><span>Database.jl</span></a></li><li><a class="tocitem" href="#Methods"><span>Methods</span></a></li></ul></li></ul></li><li><span class="tocitem">Utilities</span><ul><li><a class="tocitem" href="../InOut/">Input/Output</a></li><li><a class="tocitem" href="../FileSystem/">File System</a></li><li><a class="tocitem" href="../Miscellaneous/">Miscellaneous</a></li></ul></li><li><span class="tocitem">Data</span><ul><li><a class="tocitem" href="../documents/Example Data/">Example Data</a></li><li><input class="collapse-toggle" id="menuitem-6-2" type="checkbox"/><label class="tocitem" for="menuitem-6-2"><span class="docs-label">BCI DBs Documentation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../documents/BCI Databases Overview/">BCI DBs Overview</a></li><li><a class="tocitem" href="../documents/Databases Summary MI/">databases Summary MI</a></li><li><a class="tocitem" href="../documents/TreatmentMI/">TreatmentMI</a></li><li><a class="tocitem" href="../documents/Databases Summary P300/">databases Summary P300</a></li><li><a class="tocitem" href="../documents/TreatmentP300/">TreatmentP300</a></li><li><a class="tocitem" href="../documents/yamlstruct/">NY metadata (YAML)</a></li></ul></li></ul></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Eegle Modules</a></li><li class="is-active"><a href>Database</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Database</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Marco-Congedo/Eegle.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Marco-Congedo/Eegle.jl/blob/master/docs/src/Database.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Database.jl"><a class="docs-heading-anchor" href="#Database.jl">Database.jl</a><a id="Database.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Database.jl" title="Permalink"></a></h2><p>This module implements tools to facilitate the work with EEG databases, in particular, <strong>BCI databases</strong> in <strong>NY format</strong> ‚Äî see the <a href="../documents/BCI Databases Overview/#BCI-Databases-Overview">BCI Databases Overview</a>.</p><p>To learn how to use BCI databases, see <a href="../Tutorials/Tutorial Machine Learning 1/#Tutorial-ML-1">Tutorial ML 1</a>.</p><h2 id="Methods"><a class="docs-heading-anchor" href="#Methods">Methods</a><a id="Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Methods" title="Permalink"></a></h2><table><tr><th style="text-align: left">Function</th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left"><a href="#Eegle.Database.infoDB"><code>Eegle.Database.infoDB</code></a></td><td style="text-align: left">immutable structure holding the information summarizing an EEG database</td></tr><tr><td style="text-align: left"><a href="#Eegle.Database.loadNYdb"><code>Eegle.Database.loadNYdb</code></a></td><td style="text-align: left">return a list of .npz files in a directory (this is considered a &#39;database&#39;)</td></tr><tr><td style="text-align: left"><a href="#Eegle.Database.infoNYdb"><code>Eegle.Database.infoNYdb</code></a></td><td style="text-align: left">print, save and return metadata about a database</td></tr><tr><td style="text-align: left"><a href="#Eegle.Database.selectDB"><code>Eegle.Database.selectDB</code></a></td><td style="text-align: left">select database folders based on paradigm and class requirements</td></tr><tr><td style="text-align: left"><a href="#Eegle.Database.weightsDB"><code>Eegle.Database.weightsDB</code></a></td><td style="text-align: left">get weights for each session of a database for statistical analysis</td></tr></table><p>üìñ</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Eegle.Database.infoDB" href="#Eegle.Database.infoDB"><code>Eegle.Database.infoDB</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct infoDB
    dbName              :: String
    condition           :: String
    paradigm            :: String
    files               :: Vector{String}
    nSessions           :: Vector{Int}
    nTrials             :: Dict{String, Vector{Int}}
    nSubjects           :: Int
    nSensors            :: Int
    sensors             :: Vector{String}
    sensorType          :: String
    nClasses            :: Int
    cLabels             :: Vector{String}
    sr                  :: Int
    wl                  :: Int
    offset              :: Int
    filter              :: String
    doi                 :: String
    hardware            :: String
    software            :: String
    reference           :: String
    ground              :: String
    place               :: String
    investigators       :: String
    repository          :: String
    description         :: String
    timestamp           :: Int
    formatVersion       :: String
end</code></pre><p>Immutable structure holding the summary information and metadata of an EEG database (DB) in <a href="../documents/BCI Databases Overview/#NY-format">NY format</a>.</p><p>It is created by the function <a href="#Eegle.Database.infoNYdb">infoNYdb</a>.</p><p><strong>Fields</strong></p><ul><li><code>.files</code> returns a list of <code>.npz</code> files, each corresponding to a session in the database. The length of <code>.files</code> equals the total number of sessions</li><li><code>.nSessions</code>: vector holding the number of sessions per subject</li><li><code>.nTrials</code>: a dictionary mapping each class label to a vector containing the number of trials per session for that class. For example, <code>nTrials[&quot;left_hand&quot;]</code> returns a vector with the number of trials for <code>&quot;left_hand&quot;</code> across all sessions.</li></ul><p>The following fields are assumed constant across all recordings of the database. This is checked by <strong>Eegle</strong> when you read a database.</p><ul><li><code>.dbName</code>: name or identifier of the <a href="../documents/BCI Databases Overview/#database">database</a></li><li><code>.condition</code>: experimental condition under which the DB has been recorded</li><li><code>.paradigm</code>: for BCI data, this may be :P300, :ERP or :MI ‚Äî see <a href="../documents/BCI Databases Overview/#BCI-paradigm">BCI paradigm</a></li><li><code>.nSubjects</code>: total number of subjects composing the DB ‚Äî see <a href="../documents/BCI Databases Overview/#subject">subject</a></li><li><code>.nSensors</code>: number of sensors composing the recordings (e., g., EEG electrodes)</li><li><code>.sensors</code>: list of sensor labels (e.g., [Fz, Cz, ...,Oz])</li><li><code>.sensorType</code>: type of sensors (wet, dry, Ag/cl, ...)</li><li><code>.nClasses</code>: number of classes for which labels are available</li><li><code>.cLabels</code>: list of class labels</li><li><code>.sr</code>: sampling rate of the recordings (in samples)</li><li><code>.wl</code>: for BCI, this is the duration of trials (in samples)</li><li><code>.offset</code>: shift to be applied to markers in order to determine the trial onset (in samples)</li><li><code>.filter</code>: temporal filter that has been applied to the data</li><li><code>.hardware</code>: equipment used to obtain the recordings (typically, the EEG amplifier)</li><li><code>.software</code>: software used to obtain the recordings</li><li><code>.reference</code>: label of the reference electrode for EEG differential amplifiers</li><li><code>.ground</code>: label of the electrical ground electrode</li><li><code>.doi</code>: digital object identifier (DOI) of the database</li><li><code>.place</code>: place where the recordings have been obtained</li><li><code>.investigators</code>: investigator(s) that have obtained the recordings</li><li><code>.repository</code>: public repository where the DB has made accessible</li><li><code>.description</code>: general description of the DB</li><li><code>.timestamp</code>: date of the publication of the DB</li><li><code>.formatVersion</code>: version of the <a href="../documents/BCI Databases Overview/#NY-format">NY format</a> in which the recordings have been stored.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Marco-Congedo/Eegle.jl/blob/6313b5150593542ff6bd714fea7c7dd79876afe8/src/Database.jl#L40-L109">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Eegle.Database.loadNYdb" href="#Eegle.Database.loadNYdb"><code>Eegle.Database.loadNYdb</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    function loadNYdb(dbDir=AbstractString, isin::String=&quot;&quot;)</code></pre><p>Return a list of the complete paths of all <em>.npz</em> files found in a directory given as argument <code>dbDir</code>. For each NPZ file, there must be a corresponding YAML metadata file with the same name and extension <em>.yml</em>, otherwise the file is not included in the list.</p><p>If a string is provided as kwarg <code>isin</code>, only the files whose name contains the string will be included. </p><p><strong>See Also</strong> </p><p><a href="#Eegle.Database.infoNYdb"><code>infoNYdb</code></a>, <a href="../FileSystem/#Eegle.FileSystem.getFilesInDir"><code>FileSystem.getFilesInDir</code></a></p><p><strong>Examples</strong> xxx</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Marco-Congedo/Eegle.jl/blob/6313b5150593542ff6bd714fea7c7dd79876afe8/src/Database.jl#L140-L157">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Eegle.Database.infoNYdb" href="#Eegle.Database.infoNYdb"><code>Eegle.Database.infoNYdb</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    function infoNYdb(dbDir)</code></pre><p>Create a <a href="#Eegle.Database.infoDB">infoDB</a> structure and show it in Julia&#39;s REPL.</p><p>The only argument (<code>dbDir</code>) is the directory holding all files of a database ‚Äî see <a href="../documents/BCI Databases Overview/#NY-format">NY format</a>.</p><p>This function carry out a sanity checks on the database and prints warnings if the checks fail.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">db = infoNYdb(dbDir)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Marco-Congedo/Eegle.jl/blob/6313b5150593542ff6bd714fea7c7dd79876afe8/src/Database.jl#L175-L189">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Eegle.Database.selectDB" href="#Eegle.Database.selectDB"><code>Eegle.Database.selectDB</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    function selectDB(rootDir       :: String, 
                    paradigm      :: Symbol;
                    classes       :: Union{Vector{String}, Nothing} = nothing,
                    minTrials     :: Union{Int, Nothing} = nothing,
                    summary       :: Bool = true)</code></pre><p>Return a list of <a href="#Eegle.Database.infoDB">infoDB</a> structures for all databases found in directory <code>rootDir</code>. Databases are selected according to the provided <code>paradigm</code>, which must be <code>:P300</code>, <code>:ERP</code> or <code>:MI</code>. </p><p>If <code>classes</code> is provided as a vector of class labels, return only the databases featuring those class labels. P300 databases always features only two classes (&quot;target&quot; and &quot;nontarget&quot;).  Typical MI class labels are: &quot;left_hand&quot;, &quot;right_hand&quot;, &quot;feet&quot;, &quot;rest&quot;, &quot;both_hands&quot;, and &quot;tongue&quot;.</p><p>If <code>minTrials</code> is provided as an integer, return for each database only the <a href="../documents/BCI Databases Overview/#session">sessions</a> featuring at least this number of trials in each class.</p><p>If <code>summary</code> is true (default), print a summary table of the selected databases.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">selectedDB = selectDB(.../directory_to_start_searching/, :P300)

selectedDB = selectDB(.../directory_to_start_searching/, :MI;
                      classes=[&quot;left_hand&quot;, &quot;right_hand&quot;])

selectedDB = selectDB(.../directory_to_start_searching/, :MI;
                      classes=[&quot;rest&quot;, &quot;both_hands&quot;, &quot;feet&quot;],
                      minTrials=50,
                      summarize=false)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Marco-Congedo/Eegle.jl/blob/6313b5150593542ff6bd714fea7c7dd79876afe8/src/Database.jl#L393-L424">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Eegle.Database.weightsDB" href="#Eegle.Database.weightsDB"><code>Eegle.Database.weightsDB</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    function weightsDB(files)</code></pre><p>Given a database provided by argument <code>files</code> as a list of <em>.npz</em> files,  compute a weight for each session to be used in statistical analysis when merging the classification performance  or any other relevant index across databases. </p><p>The goal of the weighting is to balance the contribution of different databases  and the different <a href="../documents/BCI Databases Overview/#subject">subjects</a> therein, considering both the number of unique subjects in each database and the fact that the number of <a href="../documents/BCI Databases Overview/#session">session</a> for each subject may be different.</p><p>The weight assigned to each session is inversely proportional to the square root of the number of unique subjects  in the database and to the square root of the number of sessions available for the same subject.</p><p>Let <span>$s_m$</span> be one of the <span>$S_m$</span> sessions for each unique subject <span>$m$</span>, the weight <span>$w_{m,s_m}$</span> for session <span>$s_m$</span> is given by:</p><p class="math-container">\[    w_{m,s_m} = \frac{\sqrt{M} \cdot \sqrt{S_m}}{N}\]</p><p>where <span>$M$</span> is the number of unique subjects in the database and <span>$N$</span> is the total number of sessions (i.e., <code>length(files)</code>).</p><p>This weighting ensures that the <strong>sum of the weights for each subject</strong> is proportional to</p><p class="math-container">\[\sqrt{M} \cdot \sqrt{S_m}\]</p><p>For example,</p><ul><li>if the database has <span>$M = 100$</span> subjects and each has 1 session, the  total weight for each subject is <span>$\sqrt{100} \cdot \sum_{m=1}^{100} \frac{\sqrt{1}}{N} = 10$</span></li><li>if each of the 100 subjects has 4 sessions, the total weight for each subject is <span>$\sqrt{100} \cdot \sum_{m=1}^{100} \frac{\sqrt{4}}{N} = 20$</span>.</li></ul><p>This is a compromise between two extreme strategies commonly used when merging indices across databases, which are both inadequate:</p><ul><li><strong>Uniform per-session weights</strong> (i.e., all sessions contribute equally), which favors larger databases or those with many sessions</li><li><strong>Uniform per-database weights</strong> (i.e., all databases contribute equally), which overemphasizes small databases.</li></ul><p>Once obtained the weights for several databases, they can be globally normalized in any desired way.</p><p><strong>Return</strong></p><ul><li><code>weights</code>: a vector of length <span>$N$</span>, containing the weight for each session in <code>files</code></li><li><code>schedule</code>: an <span>$N √ó 2$</span> matrix of integers where:<ul><li>the first column contains the index of the subject to which the session belongs</li><li>the second column contains the number of sessions for that subject.</li></ul></li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">w, schedule = weightsDB(files)</code></pre><p><strong>Tutorials</strong> xxx</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Marco-Congedo/Eegle.jl/blob/6313b5150593542ff6bd714fea7c7dd79876afe8/src/Database.jl#L567-L624">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../BCI/">¬´ Brain-Computer Interface</a><a class="docs-footer-nextpage" href="../InOut/">Input/Output ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Sunday 6 July 2025 16:28">Sunday 6 July 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
